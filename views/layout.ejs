<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <title>The Inner Circle</title>
    <link rel="stylesheet" href="/styles/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <header>
      <div class="container">
        <div class="logo">The Inner Circle</div>
        <nav>
          <ul class="nav-links">
            <% if (currentUser) { %>
              <li>Welcome, <%= currentUser.username %></li>
              <li><a href="/log-out">Log out</a></li>
            <% } else { %>
              <li><a href="/log-in">Log in</a></li>
              <li><a href="/sign-up">Sign up</a></li>
            <% } %>
          </ul>
          <button id="theme-toggle" title="Toggle theme">ðŸŒ“</button>
          <button class="hamburger" id="hamburger">â˜°</button>
        </nav>
      </div>
    </header>

   <% if (messages && messages.error && messages.error.length > 0) { %>
  <div class="flash error"><%= messages.error.join("<br>") %></div>
<% } %>

<% if (messages && messages.success && messages.success.length > 0) { %>
  <div class="flash success"><%= messages.success.join("<br>") %></div>
<% } %>


    <main>
      <%- body %>
    </main>

    <footer>
      <p>&copy; <%= new Date().getFullYear() %> The Inner Circle. All rights reserved.</p>
    </footer>

    <script>
      // Theme toggle
      const toggle = document.getElementById("theme-toggle");
      const footer = document.querySelector("footer")
      toggle.addEventListener("click", () => {
        const html = document.documentElement;
        html.dataset.theme = html.dataset.theme === "dark" ? "light" : "dark";
        footer.style.backgroundColor = 
    footer.style.backgroundColor === "black" ? "#eee" : "black"
      });

      // Mobile nav toggle
      const hamburger = document.getElementById("hamburger");
      const navLinks = document.querySelector(".nav-links");
      hamburger.addEventListener("click", () => {
        navLinks.classList.toggle("active");
      });

      // Auto-hide flash messages
      setTimeout(() => {
        document.querySelectorAll(".flash").forEach(el => el.style.opacity = "0");
      }, 3000);
    </script>
  </body>
</html>


